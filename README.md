# 토비의 스프링 정리
### - 스프링
  
  - 자바 엔터프라이즈 애플리케이션 개발에 사용되는 애플리케이션 프레임워크

### - 활용 요소

  1. 스프링 컨테이너
     
    - 애플리케이션을 구성하는 오브젝트를 생성하고 관리
    - 웹 모듈에서 동작하는 서비스나 서블릿으로 등록해서 사용 (독립적으로도 동작 가능)
      
  2. 지원 프로그래밍 모델
    
    1️⃣ IoC / DI
    - 오브젝트의 생명주기와 의존관계에 대한 프로그래밍 모델
      
    2️⃣ 서비스 추상화
    - 구체적인 기술이나 환경에 종속되지 않도록 유연한 추상계층을 두는 방법
      
    3️⃣ AOP
    - 부가적인 기능을 독립적으로 모듈화해주는 프로그래밍 모델

  3. 기술 API
      
    - UI 작성 외에 다양한 계층의 주요 기술들을 스프링에서 일관된 방식으로 사용할 수 있도록 지원하고 전략 클래스 제공
    - 스프링의 모든 기술들을 표준 자바 엔터프라이즈 플랫폼에 기반


---

### DAO
  - DB를 사용해 데이터를 조회하거나 조작하는 기능을 전담하도록 만든 객체

  - 자바 빈 (@Bean과 다름)
      
        - 만족 조건

        1. 디폴트 생성자
        - 파라미터가 없는 생성자
  
        2. 프로퍼티
        - 자바 빈이 노출하는 이름을 가진 속성
        - Getter를 통해 조회, Setter를 통해 수정할 수 있음
        
#### DAO의 분리
    
      - UserDao의 관심사항
      
        1️⃣ DB와 연결을 위한 커넥션을 어떻게 가져올까?
      
        2️⃣ 사용자 등록을 위해 DB에 보낼 SQL 문장을 담을 Statement를 만들고 실행
      
        3️⃣ 작업 종료 시 사용한 리소스를 닫아 시스템에 돌려주는 것


- 관심사의 분리

      - 관심사가 같은 것끼리 모으고 다른 것은 분리해주는 것

- 리팩토링

      - 기존의 코드를 외부의 동작방식에는 변화없이 내부 구조를 변경해서 재구성
      - 생산성 및 품질 증가, 유지 보수가 용이하고 유연한 제품 개발 가능

- 상속을 통해 기능을 확장하는 방법
  
      - 템플릿 메서드 패턴
  
        슈퍼클래스 : 기본적인 로직의 흐름(=변하지 않는 기능) , 기능의 일부를 추상 메서드나 오버라이딩이 가능한 메서드로 구현
        서브클래스 : 슈퍼클래스의 메서드를 필요에 맞게 구현


      - 팩토리 메서드 패턴
  
        슈퍼클래스 :  서브클래스에서 구현할 메서드 호출 후(주로 인터페이스 타입) 필요한 타입의 객체를 가져와 사용
        서브클래스 : 다양한 방법으로 객체 생성 메서드 재정의 가능

#### DAO의 확장

    - 개방 폐쇄 원칙
      클래스나 모듈은 확장에는 열려있어야 하고 변경에는 닫혀있어야 한다.

      높은 응집도 : 변화가 일어날 때 해당 모듈에서 변하는 부분이 크다.
      낮은 결합도 : 책임과 관심사가 다른 오브젝트 또는 모듈이 느슨하게 연결된 형태

#### 제어의 역전 (IoC)

    - 제어의 역전 : 프로그램의 제어 흐름 구조가 뒤바뀌는 것
      오브젝트가 자신이 사용할 오브젝트를 스스로 선택, 생성하지 않고 자신이 어떻게 만들어지고 어디서 사용되는지 알 수 없다.

      (제어 권한을 자신이 아닌 다른 대상에게 위임하기 때문)



    - 오브젝트 팩토리

      팩토리 : 오브젝트를 생성하는 쪽과 생성된 오브젝트를 사용하는 쪽의 역할과 책임을 깔끔하게 분리하려는 목적으로 사용
      

    - 프레임워크 : 제어의 역전이 적용된 대표적 기술

      프레임 워크 위에 개발한 클래스 등록, 프레임워크가 흐름을 주도하는 중 개발자가 만든 애플리케이션 코드를 사용


  #### 스프링의 IoC

    - 빈 : 스프링이 IoC 방식으로 관리하는 오브젝트

    - 빈 팩토리 : 스프링의 IoC를 담당하는 핵심 컨테이너
      - 빈의 등록, 생성, 조회, 반환, 관리하는 기능 담당

    - 애플리케이션 컨텍스트 : 빈 팩토리를 확장한 IoC 컨테이너
      - 빈 팩토리의 기본적인 기능 + 스프링의 부가 서비스 기능

    - 설정정보 : 애플리케이션 컨텍스트 또는 빈 팩토리가 IoC를 적용하기 위해 사용하는 메타정보 (Configuration)

    - IoC 컨테이너 : 빈 팩토리의 관점에서 이야기 할 때 쓰임

    - 컨테이너 : 애플리케이션 컨텍스트를 가리키는 것

    - 스프링 프레임워크 : IoC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 사용함


  #### 싱글톤 패턴

    - 자바 내 싱글톤 구현 방법

      1. private 생성자 사용
      2. 자신과 같은 타입의 스태틱 필드 정의
      3. 스태틱 팩토리 메서드를 만든 후 메서드가 최초로 호출된 시점에 한 번만 오브젝트가 만들어지게 한다.
      4. getInstance() 메서드를 통해 이미 만들어져 스태틱 필드에 저장해둔 오브젝트를 넘긴다.

    - 싱글톤 패턴의 한계

      1. 상속과 다형성을 적용할 수 없다.
      2. 테스트가 어렵다.
      3. 하나 이상의 오브젝트가 만들어질 수 있다.
      4. 전역 상태로 사용되기가 쉽다.


  #### 싱글톤 레지스트리

      - 스프링은 직접 싱글톤 형태의 오브젝틀를 만들고 관리하는 기능을 제공하는데, 이를 '싱글톤 레지스트리'라고 한다.

      장점

        - 평범한 자바 클래스를 싱글톤으로 활용하게 해준다.
        - 싱글톤으로 사용될 애플리케이션 클래스라도 public 생성자를 가질 수 있다.


  #### 스코프

      - 빈이 생성되고 존재하고 적용되는 범위를 가리킨다.
      - 스프링의 기본 스코프는 싱글톤으로, 컨테이너 내에 한 개의 오브젝트만 생성되어 한 스프링 컨테이너가 존재하는 동안 계속 유지된다.

        - 프로토타입 스코프 : 컨테이너에 빈으로 요청할 때마다 새로운 오브젝트를 생성해준다.
        - 요청 스코프 : 웹을 통해 새로운 HTTP 요청이 생길 때마다 생성되는 스코프
        - 세션 스코프 : 웹의 세션과 스코프가 유사하다.


  #### 의존관계

      - 의존한다 : 의존대상이 변하면 그것이 피의존대상에 영향을 미친다.
      - 의존관계에는 방향성이 존재한다. (의존대상은 피의존대상에 영향을 미치지만, 피의존대상은 의존대상에 영향을 미치지 않음)
      

  ##### 의존관계 검색과 주입

      - 의존관계 검색 : 자신이 필요로 하는 오브젝트를 스스로 찾는다.

              - 런타임 시 의존관계를 맺을 오브젝트를 결정하는 것, 오브젝트 생성 작업은 외부 컨테이너에게 IoC로 맡김
              - 이를 가져올 때는 메서드나 생성자의 주입 대신 스스로 컨테이너에게 요청한다.

      - 의존관계 주입 : DI 컨테이너에 의해 런타임 시 의존 오브젝트를 사용할 수 있도록 메서드를 통해 DI 컨테이너가 주입해준다.

              - DI 컨테이너 : 두 오브젝트 사이의 런타임 의존관계를 설정해주는 의존관계 주입 작업을 주도하는 존재
                              오브젝트의 생성과 초기화, 제공 등의 작업을 수행하는 컨테이너
